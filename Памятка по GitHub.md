# Памятка по работе с GitHub

Для работы над проектом вам потребуется базовое знание **git** (нагуглите любой туториал в интернете)
и несколько фишек интеграции GitHub и YouTrack.

## git

Если чувствуйте, что справитесь с консольным **git**'ом - используйте консольный **git**.
Для тех, кто не уверен в своих силах или хочет приятностей графического интерфейса
можно посоветовать (**GitKraken**)[https://www.gitkraken.com/].
Он бесплатен для некоммерческого использования и имеет встроенный клиент **git**
*(вам не придётся дополнительно возиться с его установкой и обновлением)*,
а также располагает интеграцией с **GitHub**.

## Коротко о главном

| Ветка     | Откуда начинается | Кто коммитит | Кто сливает | Откуда сливает|
|-----------|-------------------|--------------|-------------|---------------|
|**master** |-                  |никто         |тимлид       |develop        |
|**develop**|master             |никто         |ревьюверы    |из веток задач |
|**#MW-[номер задачи]** |develop|исполнитель   | -           | -             |

## Название коммита должно быть в третьем лице, как бы отражая собой **patch notes** по этому коммиту.

**Пример названия коммита:**
>Добавляет памятку по работе с GitHub #MW-5

***Не стесняемся коммитить даже незначительные изменения, чтобы окружающие видели ход ваших мыслей и вашей работы.***

## Работа с репозиторием

При нормальном цикле разработки в репозитории обычно имеются две постоянных ветки:
**master** и **develop**.  

### Ветки под текущие задачи

Для каждой задачи её исполнителю необходимо создать отдельную ветку на основании **develop**. Ветка должна иметь название, соответствующее названию задачи, над которой он работает. В нашем случае - **#MW-[номер задачи]**. Названия коммитов в эту ветку тоже должны оканчиваться **#MW-[номер задачи]** _(это для интеграции с **YouTrack**)_.

После проведения ревью ревьювер совершает **merge** с веткой **develop**. Перед этим он обязан проверить работу проекта в ветке задачи **_(пока нет CI)_**:  
  * Скомпилировать проект
  * Прогнать на нём имеющиеся тесты
  * По возможности проверить руками основной функционал, не покрытый тестами

После **merge** ветка задачи ревьювером удаляется.

### develop

Таким образом, в **develop** имеют право коммитить только ревьюверы.
В идеале в этой ветке всегда должна быть наиболее свежая и полностью рабочая версия проекта (некритические баги допускаются).  

Если вдруг в **develop** попадает нерабочий код/критический баг, ломающий нормальную работу проекта, то коммит, вызывающий этот баг, откатывается тимлидом, а виновные находятся и наказываются.  

Если происходит **форс-мажор** и коммит с критическим багом становится сложно/невозможно откатить (например, если после этого коммита идут коммиты, изменяющие эти же файлы),
> На самом деле это совсем клиника, но нужно быть готовым к худшему

то все **merge** с **develop** приостанавливаются, создаётся задача для починки ветки **develop** и под неё выделяется зондер-комманда из 1-2 человек, которые под несмолкающие овации публики с блеском её чинят (в ветке созданной задачи, конечно).
Ревью такой задачи имеет право проводить только тимлид.  
После закрытия задачи все исполнители текущих задач должны обновить свои ветки в соответствии с **develop**, чтобы после ревью опять не занести в **develop** эту же ошибку.

### master

В **master** всегда должна содержаться протестированная и гарантированно работающая версия проекта с минимумом даже некритичных багов.  
Код в **master** имеет право сливать только тимлид и только из **develop**.  
Делается это в тех случаях, когда проект в **develop** дошёл до какой-то логической завершённости и все заявленные на данный момент фичи в нём сделаны и работают.  
Обычно **merge** в **master** проводится на спринтах под хлопки открывающихся бутылок шампанского, знаменуя собой инкремент версии продукта.
